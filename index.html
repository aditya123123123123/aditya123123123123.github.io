<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aditya Jhalani - My Story</title>
    <!-- Security headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self'; object-src 'none'; base-uri 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            transition: transform 0.1s;
            z-index: 9999;
            mix-blend-mode: difference;
        }

        .cursor-follower {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            transition: transform 0.3s;
            z-index: 9998;
            mix-blend-mode: difference;
        }

        /* Canvas */
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Personal Touch - Floating Elements */
        .floating-element {
            position: fixed;
            opacity: 0.1;
            pointer-events: none;
            font-size: 24px;
            z-index: 0;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            from { transform: translateY(100vh) rotate(0deg); }
            to { transform: translateY(-100px) rotate(360deg); }
        }

        .floating-element:nth-child(1) { left: 10%; animation-delay: 0s; }
        .floating-element:nth-child(2) { left: 20%; animation-delay: -2s; }
        .floating-element:nth-child(3) { left: 30%; animation-delay: -4s; }
        .floating-element:nth-child(4) { left: 70%; animation-delay: -6s; }
        .floating-element:nth-child(5) { left: 80%; animation-delay: -8s; }
        .floating-element:nth-child(6) { left: 90%; animation-delay: -10s; }

        /* Navigation */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(to bottom, rgba(10, 10, 10, 0.9), transparent);
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .nav-bar.visible {
            opacity: 1;
        }

        .back-button {
            background: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Content */
        .content {
            position: relative;
            z-index: 1;
        }

        section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            position: relative;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        /* Hero Section - Elevator Pitch Style */
        .hero-intro {
            font-size: clamp(1.2rem, 2.5vw, 1.6rem);
            color: #666;
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.3s;
        }

        .hero-name {
            font-size: clamp(3.5rem, 8vw, 6.5rem);
            font-weight: 200;
            letter-spacing: -0.03em;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .elevator-pitch {
            font-size: clamp(1.3rem, 2.8vw, 2rem);
            line-height: 1.4;
            color: #ddd;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.7s;
        }

        .personal-touch {
            font-size: clamp(1rem, 2vw, 1.3rem);
            line-height: 1.6;
            color: #aaa;
            font-style: italic;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.9s;
        }

        /* Personal Stats Bar */
        .stats-bar {
            display: flex;
            gap: 3rem;
            margin-top: 3rem;
            padding: 2rem 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 1.1s;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 200;
            color: #fff;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Section Headers */
        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-subtitle {
            font-size: 1rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 200;
            color: #fff;
        }

        /* Story Cards - Personal Timeline */
        .story-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(50px);
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: left 0.5s;
        }

        .story-card:hover::before {
            left: 100%;
        }

        .story-card:hover {
            transform: translateY(0) scale(1.02);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .story-card.visible {
            animation: fadeInUp 0.8s ease forwards;
        }

        .story-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        .story-icon {
            font-size: 1.5rem;
            opacity: 0.7;
        }

        .story-card h3 {
            font-size: clamp(1.5rem, 3vw, 2.2rem);
            font-weight: 300;
            margin-bottom: 1rem;
            color: #fff;
        }

        .story-card .elevator-line {
            font-size: clamp(1.1rem, 2.2vw, 1.4rem);
            color: #ddd;
            line-height: 1.5;
            margin-bottom: 1.5rem;
            font-weight: 300;
        }

        .story-card .personal-detail {
            font-size: 1rem;
            color: #aaa;
            line-height: 1.6;
            font-style: italic;
        }

        /* Thought Cards - More Personal */
        .thought-card {
            background: linear-gradient(135deg, rgba(100, 50, 200, 0.1) 0%, rgba(50, 100, 200, 0.05) 100%);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(150, 100, 255, 0.2);
            border-radius: 25px;
            padding: 3rem;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(50px);
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
        }

        .thought-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(100, 50, 200, 0.2);
        }

        .thought-card.visible {
            animation: fadeInUp 0.8s ease forwards;
        }

        .thought-card h3 {
            font-size: clamp(1.8rem, 3.5vw, 2.5rem);
            font-weight: 200;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .thought-card .date {
            color: #9d7fff;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .thought-card .thought-preview {
            font-size: clamp(1.1rem, 2.2vw, 1.3rem);
            line-height: 1.6;
            color: #ccc;
        }

        /* Personal Quote Section */
        .quote-section {
            text-align: center;
            padding: 6rem 2rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0.005) 100%);
        }

        .quote-text {
            font-size: clamp(1.8rem, 4vw, 3rem);
            font-weight: 200;
            line-height: 1.3;
            color: #fff;
            margin-bottom: 2rem;
            font-style: italic;
        }

        .quote-author {
            font-size: 1.2rem;
            color: #666;
        }

        /* Contact Call-to-Action */
        .contact-cta {
            text-align: center;
            padding: 4rem 2rem;
        }

        .cta-text {
            font-size: clamp(1.5rem, 3vw, 2.2rem);
            margin-bottom: 2rem;
            color: #ddd;
        }

        .contact-methods {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .contact-method {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            border-radius: 15px;
            text-decoration: none;
            color: #fff;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .contact-method:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }

        /* Footer with Admin */
        .footer {
            text-align: center;
            padding: 3rem 2rem;
            color: #444;
            font-size: 0.85rem;
            position: relative;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .admin-button {
            background: none;
            border: none;
            color: #444;
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.85rem;
            transition: color 0.3s;
        }

        .admin-button:hover {
            color: #888;
        }

        /* All the admin panel styles remain the same */
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .login-modal.active {
            display: flex;
        }

        .login-box {
            background: #111;
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid #333;
            max-width: 400px;
            width: 90%;
        }

        .login-box h3 {
            margin-bottom: 1.5rem;
            color: #fff;
            font-weight: 300;
            font-size: 1.5rem;
        }

        .login-box input {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            border-radius: 5px;
            color: #fff;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .login-box input:focus {
            outline: none;
            border-color: #666;
        }

        .login-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .login-buttons button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .login-buttons .cancel {
            background: #333;
            color: #fff;
        }

        .login-buttons .cancel:hover {
            background: #444;
        }

        .login-buttons .login {
            background: #0066cc;
            color: #fff;
        }

        .login-buttons .login:hover {
            background: #0052a3;
        }


        /* Inline Edit Mode Styles */
        body.edit-mode {
            cursor: auto !important;
        }

        body.edit-mode .cursor,
        body.edit-mode .cursor-follower {
            display: none !important;
        }

        .edit-mode-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            z-index: 10000;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            animation: pulse 2s infinite;
            display: none;
        }

        body.edit-mode .edit-mode-indicator {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .edit-overlay {
            position: absolute;
            border: 2px dashed rgba(255, 107, 107, 0.6);
            border-radius: 8px;
            background: rgba(255, 107, 107, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            display: none;
        }

        body.edit-mode .edit-overlay {
            display: block;
        }

        .edit-overlay:hover {
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        .edit-tooltip {
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1001;
        }

        .edit-overlay:hover .edit-tooltip {
            opacity: 1;
        }

        .floating-edit-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 1px solid #444;
            border-radius: 15px;
            padding: 25px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 10001;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            display: none;
        }

        .floating-edit-panel.active {
            display: block;
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .edit-panel-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #444;
        }

        .edit-panel-title {
            font-size: 18px;
            font-weight: 300;
            color: #fff;
            margin: 0;
        }

        .edit-panel-close {
            background: none;
            border: none;
            color: #999;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            margin-left: auto;
            transition: color 0.3s;
        }

        .edit-panel-close:hover {
            color: #fff;
        }

        .edit-field {
            margin-bottom: 20px;
        }

        .edit-field label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-size: 14px;
            font-weight: 500;
        }

        .edit-field input,
        .edit-field textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #555;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s;
        }

        .edit-field input:focus,
        .edit-field textarea:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .edit-field textarea {
            min-height: 100px;
            resize: vertical;
        }

        .edit-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }

        .edit-button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .edit-button.save {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .edit-button.save:hover {
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            transform: translateY(-1px);
        }

        .edit-button.cancel {
            background: #555;
            color: white;
        }

        .edit-button.cancel:hover {
            background: #666;
        }

        .edit-button.delete {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
        }

        .edit-button.delete:hover {
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
            transform: translateY(-1px);
        }

        .floating-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: none;
            flex-direction: column;
            gap: 15px;
            z-index: 10000;
        }

        body.edit-mode .floating-controls {
            display: flex;
        }

        .floating-control-button {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .floating-control-button.add {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .floating-control-button.add:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .floating-control-button.export {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        .floating-control-button.export:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
        }

        .floating-control-button.exit {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
        }

        .floating-control-button.exit:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
        }

        .overlay-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: none;
        }

        .overlay-backdrop.active {
            display: block;
        }

        .admin-panel.active {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Enhanced Admin Header */
        .admin-header {
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.95) 0%, rgba(15, 15, 25, 0.95) 100%);
            backdrop-filter: blur(20px);
            padding: 2rem;
            border-bottom: 2px solid rgba(100, 100, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .admin-header h2 {
            font-size: 1.8rem;
            font-weight: 300;
            background: linear-gradient(135deg, #fff 0%, #9d7fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .admin-header h2::before {
            content: '⚙️';
            font-size: 1.5rem;
            filter: grayscale(0.3);
        }

        /* Enhanced Admin Navigation */
        .admin-nav {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .admin-nav button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .admin-nav button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .admin-nav button:hover::before {
            left: 100%;
        }

        .admin-nav button:hover {
            background: linear-gradient(135deg, rgba(157, 127, 255, 0.2) 0%, rgba(100, 50, 200, 0.1) 100%);
            border-color: rgba(157, 127, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(157, 127, 255, 0.2);
        }

        .admin-nav button.active {
            background: linear-gradient(135deg, rgba(157, 127, 255, 0.3) 0%, rgba(100, 50, 200, 0.2) 100%);
            border-color: rgba(157, 127, 255, 0.6);
            box-shadow: 0 4px 15px rgba(157, 127, 255, 0.3);
        }

        /* Add icons to navigation buttons */
        .admin-nav button[onclick*="profile"]::after { content: '👤'; margin-left: 0.25rem; }
        .admin-nav button[onclick*="journey"]::after { content: '🚀'; margin-left: 0.25rem; }
        .admin-nav button[onclick*="thoughts"]::after { content: '💭'; margin-left: 0.25rem; }
        .admin-nav button[onclick*="exitAdmin"]::after { content: '🚪'; margin-left: 0.25rem; }

        /* Enhanced Admin Content */
        .admin-content {
            padding: 2.5rem;
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.1) 0%, rgba(10, 10, 10, 0.1) 100%);
            min-height: calc(100vh - 120px);
        }

        .admin-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .admin-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Enhanced Edit Groups */
        .edit-group {
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.8) 0%, rgba(15, 15, 25, 0.8) 100%);
            backdrop-filter: blur(15px);
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid rgba(157, 127, 255, 0.2);
            margin-bottom: 2.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .edit-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(157, 127, 255, 0.5), transparent);
        }

        .edit-group h3 {
            margin-bottom: 2rem;
            color: #fff;
            font-weight: 400;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #9d7fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
        }

        .edit-group h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, #9d7fff, transparent);
        }

        /* Enhanced Form Fields */
        .edit-field {
            margin-bottom: 2rem;
            position: relative;
        }

        .edit-field label {
            display: block;
            margin-bottom: 0.75rem;
            color: #ddd;
            font-size: 0.95rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .edit-field input,
        .edit-field textarea {
            width: 100%;
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            position: relative;
        }

        .edit-field textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.6;
        }

        .edit-field input:focus,
        .edit-field textarea:focus {
            outline: none;
            border-color: rgba(157, 127, 255, 0.6);
            background: linear-gradient(135deg, rgba(157, 127, 255, 0.1) 0%, rgba(100, 50, 200, 0.05) 100%);
            box-shadow: 0 0 0 3px rgba(157, 127, 255, 0.1);
            transform: translateY(-1px);
        }

        .edit-field input::placeholder,
        .edit-field textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* Field Icons */
        .edit-field label::before {
            font-size: 1rem;
        }
        
        .edit-field:has(input[id*="intro"]) label::before { content: '👋'; }
        .edit-field:has(input[id*="name"]) label::before { content: '👤'; }
        .edit-field:has(textarea[id*="pitch"]) label::before { content: '🎯'; }
        .edit-field:has(textarea[id*="touch"]) label::before { content: '✨'; }
        .edit-field:has(textarea[id*="quote"]) label::before { content: '💭'; }
        .edit-field:has(textarea[id*="cta"]) label::before { content: '🤝'; }
        .edit-field:has(input[id*="gpa"]) label::before { content: '🎓'; }
        .edit-field:has(input[id*="instruments"]) label::before { content: '🎵'; }
        .edit-field:has(input[id*="years"]) label::before { content: '⏰'; }
        .edit-field:has(input[id*="leadership"]) label::before { content: '👑'; }

        /* Rich Editor Styles */
        .editor-toolbar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .editor-button {
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }

        .editor-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #666;
        }

        .editor-button.active {
            background: #0066cc;
            border-color: #0066cc;
        }

        .editor-content {
            width: 100%;
            min-height: 300px;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            border-radius: 5px;
            color: #fff;
            font-size: 1rem;
            line-height: 1.6;
            overflow-y: auto;
        }

        .editor-content:focus {
            outline: none;
            border-color: #666;
        }

        /* Enhanced Buttons */
        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        /* Base button styles */
        .admin-button-base {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .admin-button-base::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .admin-button-base:hover::before {
            left: 100%;
        }

        .admin-button-base:active {
            transform: translateY(1px);
        }

        .save-button,
        .delete-button,
        .add-new-button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .save-button::before,
        .delete-button::before,
        .add-new-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .save-button:hover::before,
        .delete-button:hover::before,
        .add-new-button:hover::before {
            left: 100%;
        }

        .save-button:active,
        .delete-button:active,
        .add-new-button:active {
            transform: translateY(1px);
        }

        .save-button {
            background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
            color: #fff;
            border: 1px solid rgba(0, 102, 204, 0.3);
        }

        .save-button::after { content: '💾'; }

        .save-button:hover {
            background: linear-gradient(135deg, #0052a3 0%, #004080 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 102, 204, 0.4);
        }

        .delete-button {
            background: linear-gradient(135deg, #aa0000 0%, #880000 100%);
            color: #fff;
            border: 1px solid rgba(170, 0, 0, 0.3);
        }

        .delete-button::after { content: '🗑️'; }

        .delete-button:hover {
            background: linear-gradient(135deg, #880000 0%, #660000 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(170, 0, 0, 0.4);
        }

        .add-new-button {
            background: linear-gradient(135deg, #00aa00 0%, #008800 100%);
            color: #fff;
            border: 1px solid rgba(0, 170, 0, 0.3);
            margin-bottom: 2rem;
        }

        .add-new-button::after { content: '➕'; }

        .add-new-button:hover {
            background: linear-gradient(135deg, #008800 0%, #006600 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 170, 0, 0.4);
        }

        /* Loading state */
        .button-loading {
            pointer-events: none;
            opacity: 0.7;
            position: relative;
        }

        .button-loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid rgba(255, 255, 255, 0.8);
            animation: spin 1s linear infinite;
            right: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background: rgba(20, 20, 30, 0.95);
            backdrop-filter: blur(10px);
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            text-transform: none;
            letter-spacing: 0;
            border: 1px solid rgba(157, 127, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .tooltip .tooltiptext::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(20, 20, 30, 0.95) transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Detail Pages */
        .detail-page {
            display: none;
            min-height: 100vh;
            padding: 6rem 2rem 4rem;
        }

        .detail-page.active {
            display: block;
        }

        .detail-content {
            max-width: 800px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease forwards;
            animation-delay: 0.3s;
        }

        .detail-content h1 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 2rem;
            font-weight: 200;
            animation-delay: 0.3s;
        }

        .detail-content .detail-meta {
            color: #666;
            margin-bottom: 3rem;
            font-size: 1.1rem;
        }

        .detail-content .detail-body {
            line-height: 1.8;
            font-size: 1.2rem;
            color: #ddd;
        }

        .detail-content .detail-body p {
            margin-bottom: 1.5rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-text {
            font-size: 1.2rem;
            color: #666;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #111;
            color: #fff;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            border: 1px solid #333;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s;
            z-index: 30000;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast.success {
            border-color: #00aa00;
        }

        .toast.error {
            border-color: #aa0000;
        }

        /* Enhanced Responsive Design */
        @media (max-width: 768px) {
            .cursor, .cursor-follower {
                display: none;
            }
            
            body {
                cursor: auto;
            }

            .stats-bar {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
            }

            .contact-methods {
                flex-direction: column;
                align-items: center;
            }

            .story-card:hover,
            .thought-card:hover {
                transform: none;
            }

            .floating-element {
                display: none;
            }

            /* Enhanced Mobile Admin Panel */
            .admin-header {
                padding: 1.5rem;
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .admin-header h2 {
                font-size: 1.5rem;
            }

            .admin-nav {
                width: 100%;
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }

            .admin-nav::-webkit-scrollbar {
                height: 4px;
            }

            .admin-nav::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 2px;
            }

            .admin-nav::-webkit-scrollbar-thumb {
                background: rgba(157, 127, 255, 0.5);
                border-radius: 2px;
            }

            .admin-nav button {
                white-space: nowrap;
                flex-shrink: 0;
                padding: 0.6rem 1.2rem;
                font-size: 0.85rem;
            }

            .admin-content {
                padding: 1.5rem;
            }

            .edit-group {
                padding: 1.5rem;
                border-radius: 15px;
                margin-bottom: 1.5rem;
            }

            .edit-group h3 {
                font-size: 1.3rem;
                margin-bottom: 1.5rem;
            }

            .edit-field {
                margin-bottom: 1.5rem;
            }

            .edit-field input,
            .edit-field textarea {
                padding: 0.875rem 1rem;
                border-radius: 10px;
            }

            .button-group {
                flex-direction: column;
                gap: 0.75rem;
            }

            .admin-button-base {
                width: 100%;
                justify-content: center;
                padding: 0.875rem 1.5rem;
            }

            .tooltip .tooltiptext {
                width: 150px;
                margin-left: -75px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .admin-header {
                padding: 1rem;
            }

            .admin-content {
                padding: 1rem;
            }

            .edit-group {
                padding: 1.25rem;
            }

            .edit-field label {
                font-size: 0.9rem;
            }

            .edit-field input,
            .edit-field textarea {
                font-size: 0.95rem;
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-text">Preparing my story...</div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Floating Personal Elements -->
    <div class="floating-element">🎷</div>
    <div class="floating-element">💻</div>
    <div class="floating-element">🎹</div>
    <div class="floating-element">⚖️</div>
    <div class="floating-element">🏀</div>
    <div class="floating-element">🌱</div>

    <!-- Navigation -->
    <nav class="nav-bar" id="nav-bar">
        <button class="back-button" onclick="navigateToHome()">← Back to My Story</button>
    </nav>

    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Three.js Canvas -->
    <canvas id="canvas"></canvas>

    <!-- Content -->
    <div class="content" id="main-content">
        <!-- Hero Section - Elevator Pitch Style -->
        <section id="hero">
            <div class="container">
                <div class="hero-intro" id="hero-intro">Hi there! Let me tell you who I am in 30 seconds...</div>
                <h1 class="hero-name" id="hero-name">I'm Aditya</h1>
                <div class="elevator-pitch" id="elevator-pitch">
                    A 17-year-old who believes that the intersection of music, technology, and leadership is where the magic happens. I'm the kid who codes AI models in the morning, leads jazz solos in the afternoon, and tackles ethical dilemmas on the Honor Council in between.
                </div>
                <div class="personal-touch" id="personal-touch">
                    What makes me different? I see patterns everywhere—from chord progressions to code logic to human behavior. My superpower? Turning complexity into clarity, whether it's explaining AI to classmates or helping resolve conflicts through restorative justice.
                </div>
                
                <div class="stats-bar">
                    <div class="stat">
                        <span class="stat-number" id="stat-gpa">4.0</span>
                        <span class="stat-label">Unweighted GPA</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="stat-instruments">4</span>
                        <span class="stat-label">Instruments</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="stat-years">12+</span>
                        <span class="stat-label">Years Music</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="stat-leadership">8</span>
                        <span class="stat-label">Student Body Elect</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Journey Section -->
        <section id="journey">
            <div class="container">
                <div class="section-header">
                    <div class="section-subtitle">The Story So Far</div>
                    <h2 class="section-title">My Journey</h2>
                </div>
                <div id="journey-container">
                    <!-- Journey stories will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Personal Quote -->
        <section class="quote-section">
            <div class="container">
                <div class="quote-text" id="personal-quote">
                    "I don't just want to use AI—I want to help shape it. The decisions we make about technology today will define the world my generation inherits tomorrow."
                </div>
                <div class="quote-author">— My personal mission</div>
            </div>
        </section>

        <!-- Thoughts Section -->
        <section id="thoughts">
            <div class="container">
                <div class="section-header">
                    <div class="section-subtitle">What I'm Thinking About</div>
                    <h2 class="section-title">Recent Thoughts</h2>
                </div>
                <div id="thoughts-container">
                    <!-- Thoughts will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Contact CTA -->
        <section class="contact-cta">
            <div class="container">
                <div class="cta-text" id="cta-text">
                    Want to collaborate, chat about AI ethics, or jam together? I'm always up for meaningful conversations.
                </div>
                <div class="contact-methods">
                    <a href="mailto:aditya@example.com" class="contact-method">
                        📧 Let's Talk
                    </a>
                    <a href="https://linkedin.com/in/aditya" class="contact-method">
                        💼 Connect
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer with Admin -->
        <footer class="footer">
            <div class="footer-content">
                <span>© 2025 Aditya Jhalani • Crafted with passion and code</span>
                <span>•</span>
                <button class="admin-button" onclick="showLoginModal()">Admin</button>
            </div>
        </footer>
    </div>

    <!-- Inline Edit Mode Elements -->
    <div class="edit-mode-indicator" id="edit-mode-indicator">
        ✏️ Edit Mode Active - Click any content to edit
    </div>

    <!-- Floating Controls -->
    <div class="floating-controls">
        <button class="floating-control-button add" onclick="showAddContentMenu()" title="Add New Content">
            ➕
        </button>
        <button class="floating-control-button export" onclick="exportWebsite()" title="Export & Download Website">
            💾
        </button>
        <button class="floating-control-button exit" onclick="exitEditMode()" title="Exit Edit Mode">
            ❌
        </button>
    </div>

    <!-- Floating Edit Panel -->
    <div class="floating-edit-panel" id="floating-edit-panel">
        <div class="edit-panel-header">
            <h3 class="edit-panel-title" id="edit-panel-title">Edit Content</h3>
            <button class="edit-panel-close" onclick="closeEditPanel()">×</button>
        </div>
        <div id="edit-panel-content">
            <!-- Dynamic edit form will be inserted here -->
        </div>
    </div>

    <!-- Overlay Backdrop -->
    <div class="overlay-backdrop" id="overlay-backdrop" onclick="closeEditPanel()"></div>

    <!-- Detail Pages Container -->
    <div id="detail-pages">
        <!-- Detail pages will be dynamically created -->
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="login-modal">
        <div class="login-box">
            <h3>Admin Login</h3>
            <input type="password" id="admin-password" placeholder="Enter password" onkeypress="if(event.key==='Enter') attemptLogin()">
            <div class="login-buttons">
                <button class="cancel" onclick="hideLoginModal()">Cancel</button>
                <button class="login" onclick="attemptLogin()">Login</button>
            </div>
        </div>
    </div>


    <!-- Three.js with integrity check -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" 
            integrity="sha512-dLxUelApnYxpLt6K2iomGngnHO83iUvZytA3YjDUCjT0HDOHKXnVYdf3hU4JjM8uEhxf9nD1/ey98U3t2vZ0qQ==" 
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        // Data Storage - Elevator Pitch Style
        let siteData = {
            profile: {
                intro: "Hi there! Let me tell you who I am in 30 seconds...",
                name: "I'm Aditya",
                elevatorPitch: "A 17-year-old who believes that the intersection of music, technology, and leadership is where the magic happens. I'm the kid who codes AI models in the morning, leads jazz solos in the afternoon, and tackles ethical dilemmas on the Honor Council in between.",
                personalTouch: "What makes me different? I see patterns everywhere—from chord progressions to code logic to human behavior. My superpower? Turning complexity into clarity, whether it's explaining AI to classmates or helping resolve conflicts through restorative justice.",
                personalQuote: "I don't just want to use AI—I want to help shape it. The decisions we make about technology today will define the world my generation inherits tomorrow.",
                ctaText: "Want to collaborate, chat about AI ethics, or jam together? I'm always up for meaningful conversations.",
                stats: {
                    gpa: "4.0",
                    instruments: "4",
                    years: "12+",
                    leadership: "8"
                }
            },
            journey: [
                {
                    id: 'journey-1',
                    icon: '🎷',
                    meta: 'Music Journey • 6+ Years',
                    title: 'From Practice Room to Stage Leadership',
                    elevatorLine: "Six years ago, I picked up a saxophone. Today, I'm leading Trinity School's Jazz Band to gold medals and discovering how improvisation teaches you to think on your feet—a skill that's surprisingly useful in coding and leadership.",
                    personalDetail: "The truth? Jazz taught me that the best solutions often come from listening to others, finding the right moment to contribute, and sometimes knowing when to step back. These lessons show up everywhere in my life.",
                    content: {
                        title: 'From Practice Room to Stage Leadership',
                        meta: 'Music Journey • 6+ Years',
                        body: [
                            {type: 'paragraph', content: 'My relationship with music started long before I picked up the saxophone. At age 4, I began learning piano, and over 12+ years, it became my foundation for understanding harmony, rhythm, and the discipline that excellence requires.'},
                            {type: 'paragraph', content: 'But jazz saxophone? That changed everything. Six years ago, when I first held that alto sax, I had no idea it would teach me lessons about leadership, collaboration, and creative problem-solving that would shape how I approach everything from coding to conflict resolution.'},
                            {type: 'paragraph', content: 'Leading Trinity School\'s Jazz Band has been one of my most formative experiences. When our ensemble won Gold at the WorldStrides Competition, it wasn\'t just about individual skill—it was about creating something greater than the sum of our parts. Every Thursday at jazz club, we experiment with improvisation and push creative boundaries together.'},
                            {type: 'paragraph', content: 'The improvisation skills I\'ve developed in jazz directly translate to my approach to programming and AI development. Both require pattern recognition, creative problem-solving, and the confidence to explore uncharted territory while staying grounded in fundamental principles.'}
                        ]
                    }
                },
                {
                    id: 'journey-2',
                    icon: '⚖️',
                    meta: 'Leadership • 2024-Present',
                    title: 'Elected to Uphold What Matters',
                    elevatorLine: "Out of our entire student body, only 8 students get elected to Honor Council. I'm one of them. My job? Making sure our community stays true to its values while showing that discipline can be compassionate.",
                    personalDetail: "Being trusted with this role taught me that real leadership isn't about power—it's about service, difficult conversations, and finding solutions that help people grow rather than just punishing mistakes.",
                    content: {
                        title: 'Elected to Uphold What Matters',
                        meta: 'Leadership • 2024-Present',
                        body: [
                            {type: 'paragraph', content: 'Being elected to Trinity School\'s Honor Council Board represents more than just recognition—it\'s a responsibility that shapes how I think about ethics, leadership, and human nature every day.'},
                            {type: 'paragraph', content: 'Out of our entire student body, only eight students are chosen for this role. We serve on the School Disciplinary Council, where we review cases of potential honor code violations and work to maintain the integrity that defines our community.'},
                            {type: 'paragraph', content: 'What I find most meaningful about this role is our focus on restorative rather than punitive justice. Every case we review is an opportunity to help a fellow student learn and grow. We believe in second chances and the power of honest reflection.'},
                            {type: 'paragraph', content: 'This experience has profoundly shaped my understanding of ethical decision-making and reinforced my commitment to building AI systems that serve humanity responsibly. The conversations we have about intent, impact, and accountability directly inform how I think about technology ethics.'}
                        ]
                    }
                },
                {
                    id: 'journey-3',
                    icon: '💻',
                    meta: 'Tech Journey • 2022-Present',
                    title: 'Building Tomorrow, One Line at a Time',
                    elevatorLine: "I'm not just using AI—I'm learning to build it. Proficient in Python, Java, CSS, and HTML, I work with models like ChatGPT, Claude, and Gemini to explore how technology can solve real problems.",
                    personalDetail: "My Johns Hopkins CTY Advanced Macroeconomics summer showed me how AI is revolutionizing economic modeling. Now I'm fascinated by the intersection of AI and education—how can we make learning more personal and accessible?",
                    content: {
                        title: 'Building Tomorrow, One Line at a Time',
                        meta: 'Tech Journey • 2022-Present',
                        body: [
                            {type: 'paragraph', content: 'My fascination with technology began with a simple Python script, but it quickly evolved into something much deeper—a passion for understanding how artificial intelligence can solve real-world problems and improve human lives.'},
                            {type: 'paragraph', content: 'I\'ve become proficient in Python, Java, CSS, and HTML, using these tools to build various projects and explore the capabilities of AI models like ChatGPT, Claude, Gemini, and ElevenLabs. Each interaction teaches me something new about the potential and limitations of current AI systems.'},
                            {type: 'paragraph', content: 'During my Advanced Macroeconomics course at Johns Hopkins CTY, I saw firsthand how AI is revolutionizing economic modeling and data analysis. This experience opened my eyes to the transformative potential of machine learning across disciplines.'},
                            {type: 'paragraph', content: 'I\'m particularly interested in the intersection of AI and education. How can we create personalized learning experiences that adapt to individual needs? How can we make quality education more accessible globally? These questions drive my exploration of educational technology and AI ethics.'}
                        ]
                    }
                },
                {
                    id: 'journey-4',
                    icon: '🌱',
                    meta: 'Personal Growth • Ongoing',
                    title: 'More Than Just Academics',
                    elevatorLine: "4.0 GPA? That's just the beginning. I'm also on the basketball court, in environmental advocacy meetings, and leading financial literacy discussions. Balance isn't just about time management—it's about being fully present in each moment.",
                    personalDetail: "Being part of the Men of Color affinity group has taught me the importance of diverse voices in every conversation, especially when we're building the AI systems that will shape our future.",
                    content: {
                        title: 'More Than Just Academics',
                        meta: 'Personal Growth • Ongoing',
                        body: [
                            {type: 'paragraph', content: 'Maintaining a 4.0 unweighted GPA while pursuing multiple passions has taught me that excellence isn\'t just about perfect grades—it\'s about bringing your full self to everything you do.'},
                            {type: 'paragraph', content: 'On the basketball court, I\'ve learned about teamwork, resilience, and staying calm under pressure. These lessons translate directly to leading jazz performances and navigating challenging Honor Council discussions.'},
                            {type: 'paragraph', content: 'My involvement in environmental advocacy through our school\'s sustainability committee reflects my belief that technology should serve the planet, not harm it. As we develop AI systems, we must consider their environmental impact and potential for addressing climate change.'},
                            {type: 'paragraph', content: 'Participating in our Men of Color affinity group has been particularly meaningful, opening my eyes to the importance of diverse perspectives in all areas, especially in AI development where bias can have real-world consequences. These conversations have shaped my commitment to inclusive technology design.'}
                        ]
                    }
                }
            ],
            thoughts: [
                {
                    id: 'thought-1',
                    title: "Why My Generation Will Define AI Ethics",
                    date: 'January 2025',
                    preview: "We're not just users of AI—we're the first generation to grow up alongside it. That gives us a unique perspective and responsibility. Through my Honor Council work and discussions in our Men of Color affinity group, I've learned that the voices we include in AI development today will determine whether these systems serve everyone or just a privileged few...",
                    content: {
                        title: "Why My Generation Will Define AI Ethics",
                        meta: 'January 2025 • A personal reflection',
                        body: [
                            {type: 'paragraph', content: 'As a member of Generation Z, I have a front-row seat to the AI revolution. We\'re not just passive consumers of this technology—we\'re the first generation to grow up with AI as a constant companion, and that gives us both unique insights and profound responsibilities.'},
                            {type: 'paragraph', content: 'My work on Trinity School\'s Honor Council has taught me that ethical decision-making isn\'t about rigid rules—it\'s about understanding context, considering impact, and prioritizing human dignity. These same principles must guide AI development.'},
                            {type: 'paragraph', content: 'Through discussions in our Men of Color affinity group, I\'ve gained deep insights into how bias in AI systems can perpetuate existing inequalities. When facial recognition fails on darker skin tones or language models reflect societal prejudices, we\'re not just seeing technical problems—we\'re witnessing ethical failures with real consequences.'},
                            {type: 'paragraph', content: 'What gives me hope is that my generation isn\'t waiting for permission to shape this future. We\'re asking hard questions now: Who gets to build these systems? Whose voices are heard in the design process? How do we ensure AI serves humanity rather than replacing it?'},
                            {type: 'paragraph', content: 'The decisions we make about AI today will define the world I\'ll live in for the next 60+ years. That\'s why I\'m committed to being part of the solution—not just as a user of AI, but as someone working to ensure its development is ethical, inclusive, and human-centered.'}
                        ]
                    }
                },
                {
                    id: 'thought-2',
                    title: 'What Jazz Taught Me About AI',
                    date: 'December 2024',
                    preview: "Six years of jazz improvisation has given me unexpected insights into artificial intelligence. Both require pattern recognition, creative problem-solving, and the courage to explore uncharted territory. But there's something jazz has that AI still lacks—soul, intention, and the magic of human collaboration...",
                    content: {
                        title: 'What Jazz Taught Me About AI',
                        meta: 'December 2024 • Connecting my passions',
                        body: [
                            {type: 'paragraph', content: 'After six years of playing jazz, I\'ve realized that improvisation and AI development have more in common than you might think. Both require deep pattern recognition, the ability to build on existing frameworks while creating something new, and the confidence to venture into unknown territory.'},
                            {type: 'paragraph', content: 'When I\'m soloing over chord changes, I\'m essentially doing real-time machine learning—recognizing harmonic patterns, predicting what will sound good next, and generating melodic lines that fit the context while expressing something uniquely mine.'},
                            {type: 'paragraph', content: 'I\'ve experimented with AI tools that analyze jazz harmony and suggest chord progressions. They\'re impressive at pattern matching and can propose variations that are theoretically sound. But they miss something crucial—the emotional weight of a blue note, the tension before a resolution, the shared breath between musicians that creates magic.'},
                            {type: 'paragraph', content: 'This has taught me that the future of AI isn\'t about replacing human creativity—it\'s about augmenting it. AI can handle the computational heavy lifting, analyze vast databases of musical knowledge, and suggest possibilities we might not consider. But the soul, the intention, the story we\'re trying to tell—that remains uniquely human.'},
                            {type: 'paragraph', content: 'As I continue exploring both music and AI, I\'m convinced that the most beautiful innovations will come from collaboration between human creativity and artificial intelligence, each contributing what they do best to create something neither could achieve alone.'}
                        ]
                    }
                },
                {
                    id: 'thought-3',
                    title: 'The Question That Keeps Me Up at Night',
                    date: 'November 2024',
                    preview: "If AI can write essays, solve math problems, and even compose music, what makes us uniquely human? Through my Honor Council work, I've learned that our humanity lies not in what we can do, but in how we choose to do it. Ethics, empathy, and moral reasoning—these are our superpowers in an AI world...",
                    content: {
                        title: 'The Question That Keeps Me Up at Night',
                        meta: 'November 2024 • Late-night reflections',
                        body: [
                            {type: 'paragraph', content: 'As someone who works with AI daily and maintains a 4.0 GPA while balancing multiple commitments, I often wonder: if AI can write better essays than most students and solve complex problems faster than humans, what makes us irreplaceable?'},
                            {type: 'paragraph', content: 'My Honor Council experience has given me a unique perspective on this question. When we review cases of academic dishonesty, we don\'t just examine what was done—we explore why it happened, what circumstances led to the decision, and how we can help the student grow.'},
                            {type: 'paragraph', content: 'This process has taught me that our humanity lies not in our ability to process information or solve problems—AI will likely surpass us in these areas. Our uniqueness lies in our capacity for ethical reasoning, empathy, and moral growth.'},
                            {type: 'paragraph', content: 'AI can generate a technically perfect essay about the importance of honesty, but it can\'t feel the weight of disappointing someone you respect. It can suggest optimal solutions to conflicts, but it can\'t experience the satisfaction of helping someone find their way back to their values.'},
                            {type: 'paragraph', content: 'This is why I believe the future belongs to humans who can work alongside AI while maintaining their ethical compass. We need people who can harness the power of artificial intelligence while ensuring it serves human flourishing, not just human convenience.'}
                        ]
                    }
                }
            ]
        };

        // Load data from localStorage with validation
        function loadData() {
            const savedData = localStorage.getItem('portfolioData');
            if (savedData) {
                try {
                    const loaded = JSON.parse(savedData);
                    
                    // Validate and sanitize loaded data
                    const sanitizedLoaded = validateAndSanitizeData(loaded);
                    
                    if (sanitizedLoaded) {
                        // Merge with default data to ensure all fields exist
                        siteData = {
                            profile: { ...siteData.profile, ...(sanitizedLoaded.profile || {}) },
                            journey: sanitizedLoaded.journey || siteData.journey,
                            thoughts: sanitizedLoaded.thoughts || siteData.thoughts
                        };
                    }
                    
                    // Ensure stats object exists
                    if (!siteData.profile.stats) {
                        siteData.profile.stats = {
                            gpa: "4.0",
                            instruments: "4",
                            years: "12+",
                            leadership: "8"
                        };
                    }
                } catch (e) {
                    console.error('Error loading saved data:', e);
                    showToast('Data validation failed, using defaults', 'error');
                }
            }
            renderContent();
        }

        // Data validation function
        function validateAndSanitizeData(data) {
            if (!data || typeof data !== 'object') return false;
            
            // Recursively sanitize string values
            function sanitizeObject(obj) {
                if (typeof obj === 'string') {
                    return sanitizeHTML(obj);
                }
                if (Array.isArray(obj)) {
                    return obj.map(item => sanitizeObject(item));
                }
                if (obj && typeof obj === 'object') {
                    const sanitized = {};
                    for (const [key, value] of Object.entries(obj)) {
                        sanitized[key] = sanitizeObject(value);
                    }
                    return sanitized;
                }
                return obj;
            }
            
            return sanitizeObject(data);
        }

        // Save data to localStorage with validation
        function saveData() {
            try {
                // Validate and sanitize data before saving
                const sanitizedData = validateAndSanitizeData(siteData);
                localStorage.setItem('portfolioData', JSON.stringify(sanitizedData));
            } catch (e) {
                console.error('Error saving data:', e);
                showToast('Failed to save data', 'error');
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            try {
                const toast = document.getElementById('toast');
                if (toast) {
                    toast.textContent = message;
                    toast.className = `toast show ${type}`;
                    
                    setTimeout(() => {
                        if (toast) {
                            toast.classList.remove('show');
                        }
                    }, 3000);
                }
            } catch (error) {
                console.error('Error showing toast:', error);
            }
        }

        // HTML sanitization function
        function sanitizeHTML(str) {
            if (!str) return '';
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        }
        
        // Allowed HTML tags for content
        function sanitizeContent(content) {
            if (!content) return '';
            // Basic HTML sanitization - remove script tags and event handlers
            return content
                .replace(/<script[^>]*>.*?<\/script>/gi, '')
                .replace(/<iframe[^>]*>.*?<\/iframe>/gi, '')
                .replace(/on\w+\s*=\s*["'][^"']*["']/gi, '')
                .replace(/javascript:/gi, '')
                .replace(/<object[^>]*>.*?<\/object>/gi, '')
                .replace(/<embed[^>]*>.*?<\/embed>/gi, '')
                .replace(/<form[^>]*>.*?<\/form>/gi, '')
                .replace(/<input[^>]*>/gi, '')
                .replace(/<textarea[^>]*>.*?<\/textarea>/gi, '');
        }

        // Convert content structure to HTML
        function contentToHTML(content) {
            try {
                if (!content || !content.title) return '<p>Content not available</p>';
                
                let html = `<h1>${sanitizeHTML(content.title)}</h1>`;
                html += `<div class="detail-meta">${sanitizeHTML(content.meta || '')}</div>`;
                html += '<div class="detail-body">';
                
                if (content.body && Array.isArray(content.body)) {
                    content.body.forEach(item => {
                        if (!item || !item.type) return;
                        
                        switch(item.type) {
                            case 'paragraph':
                                html += `<p>${sanitizeContent(item.content || '')}</p>`;
                                break;
                            case 'heading1':
                                html += `<h1>${sanitizeHTML(item.content || '')}</h1>`;
                                break;
                            case 'heading2':
                                html += `<h2>${sanitizeHTML(item.content || '')}</h2>`;
                                break;
                            case 'heading3':
                                html += `<h3>${sanitizeHTML(item.content || '')}</h3>`;
                                break;
                            case 'image':
                                // Validate image sources
                                const src = (item.src || '').replace(/["'<>]/g, '');
                                const alt = sanitizeHTML(item.alt || '');
                                if (src && (src.startsWith('http') || src.startsWith('/'))) {
                                    html += `<img src="${src}" alt="${alt}" style="max-width:100%;height:auto;">`;
                                }
                                break;
                            case 'list':
                                html += item.ordered ? '<ol>' : '<ul>';
                                if (item.items && Array.isArray(item.items)) {
                                    item.items.forEach(li => {
                                        html += `<li>${sanitizeHTML(li || '')}</li>`;
                                    });
                                }
                                html += item.ordered ? '</ol>' : '</ul>';
                                break;
                            case 'quote':
                                html += `<blockquote>${sanitizeContent(item.content || '')}</blockquote>`;
                                break;
                        }
                    });
                }
                
                html += '</div>';
                return html;
            } catch (error) {
                console.error('Error in contentToHTML:', error);
                return '<p>Error loading content</p>';
            }
        }

        // Render main content
        function renderContent() {
            try {
                // Update profile with safe property access
                const heroIntro = document.getElementById('hero-intro');
                const heroName = document.getElementById('hero-name');
                const elevatorPitch = document.getElementById('elevator-pitch');
                const personalTouch = document.getElementById('personal-touch');
                const personalQuote = document.getElementById('personal-quote');
                const ctaText = document.getElementById('cta-text');

                if (heroIntro && siteData.profile?.intro) heroIntro.textContent = siteData.profile.intro;
                if (heroName && siteData.profile?.name) heroName.textContent = siteData.profile.name;
                if (elevatorPitch && siteData.profile?.elevatorPitch) elevatorPitch.textContent = siteData.profile.elevatorPitch;
                if (personalTouch && siteData.profile?.personalTouch) personalTouch.textContent = siteData.profile.personalTouch;
                if (personalQuote && siteData.profile?.personalQuote) personalQuote.textContent = siteData.profile.personalQuote;
                if (ctaText && siteData.profile?.ctaText) ctaText.textContent = siteData.profile.ctaText;

                // Update stats with safe property access
                const statGpa = document.getElementById('stat-gpa');
                const statInstruments = document.getElementById('stat-instruments');
                const statYears = document.getElementById('stat-years');
                const statLeadership = document.getElementById('stat-leadership');

                if (statGpa && siteData.profile?.stats?.gpa) statGpa.textContent = siteData.profile.stats.gpa;
                if (statInstruments && siteData.profile?.stats?.instruments) statInstruments.textContent = siteData.profile.stats.instruments;
                if (statYears && siteData.profile?.stats?.years) statYears.textContent = siteData.profile.stats.years;
                if (statLeadership && siteData.profile?.stats?.leadership) statLeadership.textContent = siteData.profile.stats.leadership;

                // Render journey
                const journeyContainer = document.getElementById('journey-container');
                if (journeyContainer && siteData.journey) {
                    journeyContainer.innerHTML = '';
                    siteData.journey.forEach(story => {
                        const div = document.createElement('div');
                        div.className = 'story-card';
                        div.id = story.id;
                        div.onclick = () => navigateToDetail(story.id);
                        div.innerHTML = `
                            <div class="story-meta">
                                <span class="story-icon">${sanitizeHTML(story.icon || '✨')}</span>
                                <span>${sanitizeHTML(story.meta || '')}</span>
                            </div>
                            <h3>${sanitizeHTML(story.title || 'Untitled Story')}</h3>
                            <div class="elevator-line">${sanitizeHTML(story.elevatorLine || '')}</div>
                            <div class="personal-detail">${sanitizeHTML(story.personalDetail || '')}</div>
                        `;
                        journeyContainer.appendChild(div);
                    });
                }

                // Render thoughts
                const thoughtsContainer = document.getElementById('thoughts-container');
                if (thoughtsContainer && siteData.thoughts) {
                    thoughtsContainer.innerHTML = '';
                    siteData.thoughts.forEach(thought => {
                        const div = document.createElement('div');
                        div.className = 'thought-card';
                        div.id = thought.id;
                        div.onclick = () => navigateToDetail(thought.id);
                        div.innerHTML = `
                            <h3>${sanitizeHTML(thought.title || 'Untitled Thought')}</h3>
                            <div class="date">${sanitizeHTML(thought.date || '')}</div>
                            <div class="thought-preview">${sanitizeHTML(thought.preview || '')}</div>
                        `;
                        thoughtsContainer.appendChild(div);
                    });
                }

                // Re-observe for animations
                observeElements();
            } catch (error) {
                console.error('Error in renderContent:', error);
            }
        }

        // Navigation functions
        function navigateToDetail(id) {
            try {
                const mainContent = document.getElementById('main-content');
                const navBar = document.getElementById('nav-bar');
                
                if (mainContent) mainContent.style.display = 'none';
                if (navBar) navBar.classList.add('visible');
                
                // Find the content
                let content = null;
                const journeyStory = siteData.journey?.find(s => s.id === id);
                const thought = siteData.thoughts?.find(t => t.id === id);
                
                if (journeyStory) content = journeyStory.content;
                if (thought) content = thought.content;
                
                if (content) {
                    // Create or update detail page
                    let detailPage = document.getElementById(`detail-${id}`);
                    if (!detailPage) {
                        detailPage = document.createElement('div');
                        detailPage.className = 'detail-page';
                        detailPage.id = `detail-${id}`;
                        const detailPagesContainer = document.getElementById('detail-pages');
                        if (detailPagesContainer) {
                            detailPagesContainer.appendChild(detailPage);
                        }
                    }
                    
                    if (detailPage) {
                        detailPage.innerHTML = `<div class="detail-content">${contentToHTML(content)}</div>`;
                        
                        // Hide all detail pages
                        document.querySelectorAll('.detail-page').forEach(page => {
                            if (page && page.classList) {
                                page.classList.remove('active');
                            }
                        });
                        
                        // Show the selected detail page
                        detailPage.classList.add('active');
                    }
                }
                
                // Scroll to top
                window.scrollTo(0, 0);
            } catch (error) {
                console.error('Error in navigateToDetail:', error);
            }
        }

        function navigateToHome() {
            try {
                const mainContent = document.getElementById('main-content');
                const navBar = document.getElementById('nav-bar');
                
                if (mainContent) mainContent.style.display = 'block';
                if (navBar) navBar.classList.remove('visible');
                
                // Hide all detail pages
                document.querySelectorAll('.detail-page').forEach(page => {
                    if (page && page.classList) {
                        page.classList.remove('active');
                    }
                });
                
                // Scroll to top
                window.scrollTo(0, 0);
            } catch (error) {
                console.error('Error in navigateToHome:', error);
            }
        }

        // Admin functions
        const ADMIN_PASSWORD = "trinity2028";

        function showLoginModal() {
            try {
                const modal = document.getElementById('login-modal');
                const passwordInput = document.getElementById('admin-password');
                if (modal) modal.classList.add('active');
                if (passwordInput) passwordInput.focus();
            } catch (error) {
                console.error('Error in showLoginModal:', error);
            }
        }

        function hideLoginModal() {
            try {
                const modal = document.getElementById('login-modal');
                const passwordInput = document.getElementById('admin-password');
                if (modal) modal.classList.remove('active');
                if (passwordInput) passwordInput.value = '';
            } catch (error) {
                console.error('Error in hideLoginModal:', error);
            }
        }

        function attemptLogin() {
            try {
                const passwordInput = document.getElementById('admin-password');
                const password = passwordInput ? passwordInput.value : '';
                if (password === ADMIN_PASSWORD) {
                    hideLoginModal();
                    enterEditMode();
                } else {
                    showToast('Incorrect password', 'error');
                    if (passwordInput) passwordInput.value = '';
                }
            } catch (error) {
                console.error('Error in attemptLogin:', error);
            }
        }

        // Inline Edit Mode Functions
        let currentEditType = null;
        let currentEditIndex = null;

        function enterEditMode() {
            try {
                document.body.classList.add('edit-mode');
                createEditOverlays();
                showToast('🎨 Edit mode activated! Click any content to edit it', 'success');
            } catch (error) {
                console.error('Error in enterEditMode:', error);
            }
        }

        function exitEditMode() {
            try {
                document.body.classList.remove('edit-mode');
                removeEditOverlays();
                closeEditPanel();
                showToast('👋 Edit mode deactivated', 'success');
            } catch (error) {
                console.error('Error in exitEditMode:', error);
            }
        }

        function createEditOverlays() {
            // Remove any existing overlays
            removeEditOverlays();

            // Create overlays for editable content
            createOverlayForElement('#hero-intro', 'profile', 'intro', 'Edit opening line');
            createOverlayForElement('#hero-name', 'profile', 'name', 'Edit name display');
            createOverlayForElement('#elevator-pitch', 'profile', 'elevatorPitch', 'Edit elevator pitch');
            createOverlayForElement('#personal-touch', 'profile', 'personalTouch', 'Edit personal touch');
            createOverlayForElement('#personal-quote', 'profile', 'personalQuote', 'Edit personal quote');
            createOverlayForElement('#cta-text', 'profile', 'ctaText', 'Edit contact CTA');

            // Create overlays for journey stories
            document.querySelectorAll('.story-card').forEach((card, index) => {
                createOverlayForElement(card, 'journey', index, `Edit journey story: ${siteData.journey[index]?.title || 'Story'}`);
            });

            // Create overlays for thoughts
            document.querySelectorAll('.thought-card').forEach((card, index) => {
                createOverlayForElement(card, 'thoughts', index, `Edit thought: ${siteData.thoughts[index]?.title || 'Thought'}`);
            });

            // Create overlays for stats
            createOverlayForElement('.stats-bar', 'stats', null, 'Edit personal statistics');
        }

        function createOverlayForElement(selector, type, index, tooltip) {
            const element = typeof selector === 'string' ? document.querySelector(selector) : selector;
            if (!element) return;

            const rect = element.getBoundingClientRect();
            const overlay = document.createElement('div');
            overlay.className = 'edit-overlay';
            overlay.style.position = 'fixed';
            overlay.style.top = rect.top + 'px';
            overlay.style.left = rect.left + 'px';
            overlay.style.width = rect.width + 'px';
            overlay.style.height = rect.height + 'px';

            const tooltipElement = document.createElement('div');
            tooltipElement.className = 'edit-tooltip';
            tooltipElement.textContent = tooltip;
            overlay.appendChild(tooltipElement);

            overlay.onclick = () => openEditPanel(type, index);
            document.body.appendChild(overlay);
        }

        function removeEditOverlays() {
            document.querySelectorAll('.edit-overlay').forEach(overlay => {
                overlay.remove();
            });
        }

        function openEditPanel(type, index) {
            currentEditType = type;
            currentEditIndex = index;
            
            const panel = document.getElementById('floating-edit-panel');
            const backdrop = document.getElementById('overlay-backdrop');
            const title = document.getElementById('edit-panel-title');
            const content = document.getElementById('edit-panel-content');

            // Set title and create form based on type
            switch(type) {
                case 'profile':
                    title.textContent = 'Edit Profile Content';
                    content.innerHTML = createProfileEditForm(index);
                    break;
                case 'journey':
                    title.textContent = `Edit Journey Story: ${siteData.journey[index]?.title || 'Story'}`;
                    content.innerHTML = createJourneyEditForm(index);
                    break;
                case 'thoughts':
                    title.textContent = `Edit Thought: ${siteData.thoughts[index]?.title || 'Thought'}`;
                    content.innerHTML = createThoughtEditForm(index);
                    break;
                case 'stats':
                    title.textContent = 'Edit Personal Statistics';
                    content.innerHTML = createStatsEditForm();
                    break;
            }

            panel.classList.add('active');
            backdrop.classList.add('active');
        }

        function closeEditPanel() {
            const panel = document.getElementById('floating-edit-panel');
            const backdrop = document.getElementById('overlay-backdrop');
            panel.classList.remove('active');
            backdrop.classList.remove('active');
            currentEditType = null;
            currentEditIndex = null;
        }

        function createProfileEditForm(field) {
            const profileData = siteData.profile;
            switch(field) {
                case 'intro':
                    return `
                        <div class="edit-field">
                            <label>Opening Line</label>
                            <input type="text" id="edit-intro" value="${sanitizeHTML(profileData.intro || '')}" placeholder="Your opening greeting">
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('intro')">Save</button>
                        </div>
                    `;
                case 'name':
                    return `
                        <div class="edit-field">
                            <label>Name Display</label>
                            <input type="text" id="edit-name" value="${sanitizeHTML(profileData.name || '')}" placeholder="How you want your name displayed">
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('name')">Save</button>
                        </div>
                    `;
                case 'elevatorPitch':
                    return `
                        <div class="edit-field">
                            <label>Elevator Pitch</label>
                            <textarea id="edit-elevator-pitch" placeholder="Your main elevator pitch">${sanitizeHTML(profileData.elevatorPitch || '')}</textarea>
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('elevatorPitch')">Save</button>
                        </div>
                    `;
                case 'personalTouch':
                    return `
                        <div class="edit-field">
                            <label>Personal Touch</label>
                            <textarea id="edit-personal-touch" placeholder="What makes you unique">${sanitizeHTML(profileData.personalTouch || '')}</textarea>
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('personalTouch')">Save</button>
                        </div>
                    `;
                case 'personalQuote':
                    return `
                        <div class="edit-field">
                            <label>Personal Quote</label>
                            <textarea id="edit-personal-quote" placeholder="Your personal mission or quote">${sanitizeHTML(profileData.personalQuote || '')}</textarea>
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('personalQuote')">Save</button>
                        </div>
                    `;
                case 'ctaText':
                    return `
                        <div class="edit-field">
                            <label>Contact Call-to-Action Text</label>
                            <textarea id="edit-cta-text" placeholder="Invite people to connect with you">${sanitizeHTML(profileData.ctaText || '')}</textarea>
                        </div>
                        <div class="edit-buttons">
                            <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                            <button class="edit-button save" onclick="saveProfileField('ctaText')">Save</button>
                        </div>
                    `;
            }
        }

        function createStatsEditForm() {
            const stats = siteData.profile.stats || {};
            return `
                <div class="edit-field">
                    <label>GPA</label>
                    <input type="text" id="edit-stat-gpa" value="${sanitizeHTML(stats.gpa || '')}" placeholder="Your GPA">
                </div>
                <div class="edit-field">
                    <label>Number of Instruments</label>
                    <input type="text" id="edit-stat-instruments" value="${sanitizeHTML(stats.instruments || '')}" placeholder="Instruments you play">
                </div>
                <div class="edit-field">
                    <label>Years of Music</label>
                    <input type="text" id="edit-stat-years" value="${sanitizeHTML(stats.years || '')}" placeholder="Years playing music">
                </div>
                <div class="edit-field">
                    <label>Leadership Positions</label>
                    <input type="text" id="edit-stat-leadership" value="${sanitizeHTML(stats.leadership || '')}" placeholder="Leadership roles">
                </div>
                <div class="edit-buttons">
                    <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                    <button class="edit-button save" onclick="saveStats()">Save</button>
                </div>
            `;
        }

        function createJourneyEditForm(index) {
            const story = siteData.journey[index];
            if (!story) return '';
            
            return `
                <div class="edit-field">
                    <label>Icon (emoji)</label>
                    <input type="text" id="edit-journey-icon" value="${sanitizeHTML(story.icon || '')}" placeholder="Choose an emoji">
                </div>
                <div class="edit-field">
                    <label>Meta Info</label>
                    <input type="text" id="edit-journey-meta" value="${sanitizeHTML(story.meta || '')}" placeholder="Category • Timeline">
                </div>
                <div class="edit-field">
                    <label>Title</label>
                    <input type="text" id="edit-journey-title" value="${sanitizeHTML(story.title || '')}" placeholder="Story title">
                </div>
                <div class="edit-field">
                    <label>Elevator Line</label>
                    <textarea id="edit-journey-elevator" placeholder="Brief compelling summary">${sanitizeHTML(story.elevatorLine || '')}</textarea>
                </div>
                <div class="edit-field">
                    <label>Personal Detail</label>
                    <textarea id="edit-journey-personal" placeholder="Personal insights and details">${sanitizeHTML(story.personalDetail || '')}</textarea>
                </div>
                <div class="edit-field">
                    <label>Full Story Content</label>
                    <textarea id="edit-journey-content" rows="8" placeholder="The complete story content">${story.content?.body?.map(item => item.content).join('\\n\\n') || ''}</textarea>
                </div>
                <div class="edit-buttons">
                    <button class="edit-button delete" onclick="deleteJourneyStoryInline(${index})">Delete</button>
                    <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                    <button class="edit-button save" onclick="saveJourneyStoryInline(${index})">Save</button>
                </div>
            `;
        }

        function createThoughtEditForm(index) {
            const thought = siteData.thoughts[index];
            if (!thought) return '';
            
            return `
                <div class="edit-field">
                    <label>Title</label>
                    <input type="text" id="edit-thought-title" value="${sanitizeHTML(thought.title || '')}" placeholder="Thought title">
                </div>
                <div class="edit-field">
                    <label>Date</label>
                    <input type="text" id="edit-thought-date" value="${sanitizeHTML(thought.date || '')}" placeholder="Month Year">
                </div>
                <div class="edit-field">
                    <label>Preview Text</label>
                    <textarea id="edit-thought-preview" rows="4" placeholder="Brief preview of your thought">${sanitizeHTML(thought.preview || '')}</textarea>
                </div>
                <div class="edit-field">
                    <label>Full Content</label>
                    <textarea id="edit-thought-content" rows="10" placeholder="Your complete thoughts and reflections">${thought.content?.body?.map(item => item.content).join('\\n\\n') || ''}</textarea>
                </div>
                <div class="edit-buttons">
                    <button class="edit-button delete" onclick="deleteThoughtInline(${index})">Delete</button>
                    <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                    <button class="edit-button save" onclick="saveThoughtInline(${index})">Save</button>
                </div>
            `;
        }

        function showAddContentMenu() {
            const content = `
                <div class="edit-field">
                    <label>What would you like to add?</label>
                    <button class="edit-button save" style="width: 100%; margin-bottom: 10px;" onclick="addNewJourneyStoryInline()">
                        🚀 Add New Journey Story
                    </button>
                    <button class="edit-button save" style="width: 100%;" onclick="addNewThoughtInline()">
                        💭 Add New Thought
                    </button>
                </div>
                <div class="edit-buttons">
                    <button class="edit-button cancel" onclick="closeEditPanel()">Cancel</button>
                </div>
            `;

            const title = document.getElementById('edit-panel-title');
            const contentDiv = document.getElementById('edit-panel-content');
            const panel = document.getElementById('floating-edit-panel');
            const backdrop = document.getElementById('overlay-backdrop');

            title.textContent = 'Add New Content';
            contentDiv.innerHTML = content;
            panel.classList.add('active');
            backdrop.classList.add('active');
        }

        // Save functions for inline editing
        function saveProfileField(field) {
            try {
                let value = '';
                switch(field) {
                    case 'intro':
                        value = document.getElementById('edit-intro')?.value || '';
                        siteData.profile.intro = value;
                        break;
                    case 'name':
                        value = document.getElementById('edit-name')?.value || '';
                        siteData.profile.name = value;
                        break;
                    case 'elevatorPitch':
                        value = document.getElementById('edit-elevator-pitch')?.value || '';
                        siteData.profile.elevatorPitch = value;
                        break;
                    case 'personalTouch':
                        value = document.getElementById('edit-personal-touch')?.value || '';
                        siteData.profile.personalTouch = value;
                        break;
                    case 'personalQuote':
                        value = document.getElementById('edit-personal-quote')?.value || '';
                        siteData.profile.personalQuote = value;
                        break;
                    case 'ctaText':
                        value = document.getElementById('edit-cta-text')?.value || '';
                        siteData.profile.ctaText = value;
                        break;
                }
                
                saveData();
                renderContent();
                createEditOverlays(); // Refresh overlays
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('✅ Profile updated successfully!', 'success');
            } catch (error) {
                console.error('Error saving profile field:', error);
                showToast('❌ Error saving changes', 'error');
            }
        }

        function saveStats() {
            try {
                if (!siteData.profile.stats) siteData.profile.stats = {};
                
                siteData.profile.stats.gpa = document.getElementById('edit-stat-gpa')?.value || '';
                siteData.profile.stats.instruments = document.getElementById('edit-stat-instruments')?.value || '';
                siteData.profile.stats.years = document.getElementById('edit-stat-years')?.value || '';
                siteData.profile.stats.leadership = document.getElementById('edit-stat-leadership')?.value || '';
                
                saveData();
                renderContent();
                createEditOverlays();
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('📊 Statistics updated successfully!', 'success');
            } catch (error) {
                console.error('Error saving stats:', error);
                showToast('❌ Error saving statistics', 'error');
            }
        }

        function saveJourneyStoryInline(index) {
            try {
                const story = siteData.journey[index];
                if (!story) return;
                
                story.icon = document.getElementById('edit-journey-icon')?.value || '';
                story.meta = document.getElementById('edit-journey-meta')?.value || '';
                story.title = document.getElementById('edit-journey-title')?.value || '';
                story.elevatorLine = document.getElementById('edit-journey-elevator')?.value || '';
                story.personalDetail = document.getElementById('edit-journey-personal')?.value || '';
                
                const contentText = document.getElementById('edit-journey-content')?.value || '';
                const paragraphs = contentText.split('\\n\\n').filter(p => p.trim());
                story.content.body = paragraphs.map(p => ({type: 'paragraph', content: p.trim()}));
                story.content.title = story.title;
                
                saveData();
                renderContent();
                createEditOverlays();
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('🚀 Journey story updated successfully!', 'success');
            } catch (error) {
                console.error('Error saving journey story:', error);
                showToast('❌ Error saving story', 'error');
            }
        }

        function saveThoughtInline(index) {
            try {
                const thought = siteData.thoughts[index];
                if (!thought) return;
                
                thought.title = document.getElementById('edit-thought-title')?.value || '';
                thought.date = document.getElementById('edit-thought-date')?.value || '';
                thought.preview = document.getElementById('edit-thought-preview')?.value || '';
                
                const contentText = document.getElementById('edit-thought-content')?.value || '';
                const paragraphs = contentText.split('\\n\\n').filter(p => p.trim());
                thought.content.body = paragraphs.map(p => ({type: 'paragraph', content: p.trim()}));
                thought.content.title = thought.title;
                thought.content.meta = `${thought.date} • A personal reflection`;
                
                saveData();
                renderContent();
                createEditOverlays();
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('💭 Thought updated successfully!', 'success');
            } catch (error) {
                console.error('Error saving thought:', error);
                showToast('❌ Error saving thought', 'error');
            }
        }

        function deleteJourneyStoryInline(index) {
            try {
                const story = siteData.journey[index];
                if (!story) return;
                
                if (confirm(`Are you sure you want to delete "${story.title}"? This cannot be undone.`)) {
                    siteData.journey.splice(index, 1);
                    saveData();
                    renderContent();
                    createEditOverlays();
                    closeEditPanel();
                    showToast('🗑️ Journey story deleted', 'success');
                }
            } catch (error) {
                console.error('Error deleting journey story:', error);
                showToast('❌ Error deleting story', 'error');
            }
        }

        function deleteThoughtInline(index) {
            try {
                const thought = siteData.thoughts[index];
                if (!thought) return;
                
                if (confirm(`Are you sure you want to delete "${thought.title}"? This cannot be undone.`)) {
                    siteData.thoughts.splice(index, 1);
                    saveData();
                    renderContent();
                    createEditOverlays();
                    closeEditPanel();
                    showToast('🗑️ Thought deleted', 'success');
                }
            } catch (error) {
                console.error('Error deleting thought:', error);
                showToast('❌ Error deleting thought', 'error');
            }
        }

        function addNewJourneyStoryInline() {
            try {
                const newStory = {
                    id: `journey-${Date.now()}`,
                    icon: '✨',
                    meta: 'New Journey • Present',
                    title: 'New Journey Story',
                    elevatorLine: 'This is your elevator pitch for this story...',
                    personalDetail: 'Add your personal touch and insights here...',
                    content: {
                        title: 'New Journey Story',
                        meta: 'New Journey • Present',
                        body: [
                            {type: 'paragraph', content: 'Start writing your journey story here...'}
                        ]
                    }
                };
                
                siteData.journey.push(newStory);
                saveData();
                renderContent();
                createEditOverlays();
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('🚀 New journey story created!', 'success');
                
                // Auto-open edit panel for the new story
                setTimeout(() => {
                    openEditPanel('journey', siteData.journey.length - 1);
                }, 500);
            } catch (error) {
                console.error('Error adding journey story:', error);
                showToast('❌ Error creating story', 'error');
            }
        }

        function addNewThoughtInline() {
            try {
                const newThought = {
                    id: `thought-${Date.now()}`,
                    title: 'New Thought',
                    date: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),
                    preview: 'This is a preview of your new thought...',
                    content: {
                        title: 'New Thought',
                        meta: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }) + ' • A personal reflection',
                        body: [
                            {type: 'paragraph', content: 'Start writing your thought here...'}
                        ]
                    }
                };
                
                siteData.thoughts.push(newThought);
                saveData();
                renderContent();
                createEditOverlays();
                closeEditPanel();
                triggerAutoSaveOnChange();
                showToast('💭 New thought created!', 'success');
                
                // Auto-open edit panel for the new thought
                setTimeout(() => {
                    openEditPanel('thoughts', siteData.thoughts.length - 1);
                }, 500);
            } catch (error) {
                console.error('Error adding thought:', error);
                showToast('❌ Error creating thought', 'error');
            }
        }

        // Update overlays on window resize and scroll
        function updateEditOverlays() {
            if (document.body.classList.contains('edit-mode')) {
                createEditOverlays();
            }
        }

        window.addEventListener('resize', updateEditOverlays);
        window.addEventListener('scroll', updateEditOverlays);

        // Auto-save and Export Functionality
        let autoSaveTimer = null;

        function triggerAutoSave() {
            // Clear existing timer
            if (autoSaveTimer) {
                clearTimeout(autoSaveTimer);
            }
            
            // Set new timer for 2 seconds after last change
            autoSaveTimer = setTimeout(() => {
                autoSaveData();
            }, 2000);
        }

        function autoSaveData() {
            try {
                const originalSaveData = window.originalSaveData || saveData;
                originalSaveData();
                
                // Update indicator
                const indicator = document.getElementById('edit-mode-indicator');
                if (indicator) {
                    indicator.innerHTML = '💾 Auto-saved - Click any content to edit';
                    setTimeout(() => {
                        if (indicator) {
                            indicator.innerHTML = '✏️ Edit Mode Active - Click any content to edit';
                        }
                    }, 2000);
                }
                
                showToast('💾 Auto-saved changes', 'success');
            } catch (error) {
                console.error('Auto-save failed:', error);
                showToast('⚠️ Auto-save failed', 'error');
            }
        }

        function exportWebsite() {
            try {
                // Clear any existing toast notifications first
                const toast = document.getElementById('toast');
                if (toast) {
                    toast.classList.remove('show');
                    toast.textContent = '';
                }

                // Show loading state
                const exportButton = document.querySelector('.floating-control-button.export');
                if (exportButton) {
                    exportButton.style.background = 'linear-gradient(135deg, #666 0%, #444 100%)';
                    exportButton.innerHTML = '⏳';
                    exportButton.disabled = true;
                }

                showToast('📦 Preparing website export...', 'success');

                // Generate the complete HTML with current data
                setTimeout(() => {
                    // Clear any existing toast before generating
                    const toast = document.getElementById('toast');
                    if (toast) {
                        toast.classList.remove('show');
                        toast.textContent = '';
                    }
                    
                    const completeHtml = generateCompleteHtml();
                    downloadHtmlFile(completeHtml);
                    
                    // Reset button
                    if (exportButton) {
                        exportButton.style.background = 'linear-gradient(135deg, #2196F3 0%, #1976D2 100%)';
                        exportButton.innerHTML = '💾';
                        exportButton.disabled = false;
                    }
                    
                    // Clear toast before showing success message
                    setTimeout(() => {
                        showToast('✅ Website exported successfully!', 'success');
                        
                        // Auto-clear this toast after 3 seconds
                        setTimeout(() => {
                            const toast = document.getElementById('toast');
                            if (toast) {
                                toast.classList.remove('show');
                            }
                        }, 3000);
                    }, 100);
                }, 1000);

            } catch (error) {
                console.error('Export failed:', error);
                showToast('❌ Export failed', 'error');
                
                // Reset button on error
                const exportButton = document.querySelector('.floating-control-button.export');
                if (exportButton) {
                    exportButton.style.background = 'linear-gradient(135deg, #2196F3 0%, #1976D2 100%)';
                    exportButton.innerHTML = '💾';
                    exportButton.disabled = false;
                }
            }
        }

        function generateCompleteHtml() {
            // Get the current HTML document
            const currentHtml = document.documentElement.outerHTML;
            
            // Create a temporary document to work with the HTML
            const parser = new DOMParser();
            const tempDoc = parser.parseFromString(currentHtml, 'text/html');
            
            // Update the JavaScript data with current siteData
            const scriptTags = tempDoc.querySelectorAll('script');
            let dataScriptFound = false;
            
            scriptTags.forEach(script => {
                if (script.textContent.includes('let siteData = {')) {
                    // Replace the siteData with current data
                    const scriptContent = script.textContent;
                    const beforeData = scriptContent.substring(0, scriptContent.indexOf('let siteData = {'));
                    const afterData = scriptContent.substring(scriptContent.indexOf('};', scriptContent.indexOf('let siteData = {')) + 2);
                    
                    script.textContent = beforeData + 'let siteData = ' + JSON.stringify(siteData, null, 12) + ';' + afterData;
                    dataScriptFound = true;
                }
            });
            
            // If we didn't find the data script, inject current data
            if (!dataScriptFound) {
                const dataScript = tempDoc.createElement('script');
                dataScript.textContent = `
                    // Updated site data from edit mode - includes all current changes
                    let siteData = ${JSON.stringify(siteData, null, 12)};
                    
                    // Ensure data is available for admin functions
                    window.siteData = siteData;
                `;
                tempDoc.querySelector('head').appendChild(dataScript);
            }
            
            // Remove edit mode classes and elements
            const bodyElement = tempDoc.querySelector('body');
            if (bodyElement) {
                bodyElement.classList.remove('edit-mode');
            }
            
            // Remove ONLY active edit mode elements (keep all admin functionality)
            const activeEditElements = [
                '.edit-overlay'  // Only remove the active edit overlays
            ];
            
            activeEditElements.forEach(selector => {
                const elements = tempDoc.querySelectorAll(selector);
                elements.forEach(el => el.remove());
            });

            // Clear any active toast notifications but keep the toast element
            const toastElements = tempDoc.querySelectorAll('#toast');
            toastElements.forEach(el => {
                el.classList.remove('show');
                el.textContent = '';
            });

            // Clean up any remaining edit mode states
            const elementsWithShow = tempDoc.querySelectorAll('.show');
            elementsWithShow.forEach(el => {
                // Only remove 'show' class from toast elements, keep it for other elements that might need it
                if (el.id === 'toast' || el.classList.contains('toast')) {
                    el.classList.remove('show');
                }
            });

            // Verify essential admin elements are preserved
            const essentialElements = [
                '#login-modal',
                '.admin-button',
                '#toast',
                '#main-content',
                '#detail-pages',
                '.floating-controls',
                '#floating-edit-panel',
                '#overlay-backdrop',
                '.edit-mode-indicator'
            ];

            let missingElements = [];
            essentialElements.forEach(selector => {
                if (!tempDoc.querySelector(selector)) {
                    missingElements.push(selector);
                }
            });

            if (missingElements.length > 0) {
                console.warn('Warning: Some admin elements might be missing from export:', missingElements);
            }

            // Add comment indicating this is a fully functional export
            const htmlComment = '<!-- This is a complete, functional export with full admin capabilities. Login with password: trinity2028 -->\n';
            
            // Return the complete HTML document with proper DOCTYPE
            return '<!DOCTYPE html>\n' + htmlComment + tempDoc.documentElement.outerHTML;
        }

        function downloadHtmlFile(htmlContent) {
            // Create a blob with the HTML content
            const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
            
            // Create a temporary URL for the blob
            const url = URL.createObjectURL(blob);
            
            // Create a temporary download link
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            
            // Generate filename with timestamp
            const now = new Date();
            const timestamp = now.toISOString().slice(0, 19).replace(/[-:T]/g, '');
            downloadLink.download = `portfolio-${timestamp}.html`;
            
            // Trigger the download
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            // Clean up the temporary URL
            URL.revokeObjectURL(url);
        }

        // Store original saveData function
        window.originalSaveData = saveData;
        
        // Trigger auto-save when any content is saved
        function triggerAutoSaveOnChange() {
            triggerAutoSave();
        }

        function loadAdminData() {
            try {
                // Load profile data with safe property access
                const editIntro = document.getElementById('edit-hero-intro');
                const editName = document.getElementById('edit-hero-name');
                const editPitch = document.getElementById('edit-elevator-pitch');
                const editTouch = document.getElementById('edit-personal-touch');
                const editQuote = document.getElementById('edit-personal-quote');
                const editCta = document.getElementById('edit-cta-text');

                if (editIntro && siteData.profile?.intro) editIntro.value = siteData.profile.intro;
                if (editName && siteData.profile?.name) editName.value = siteData.profile.name;
                if (editPitch && siteData.profile?.elevatorPitch) editPitch.value = siteData.profile.elevatorPitch;
                if (editTouch && siteData.profile?.personalTouch) editTouch.value = siteData.profile.personalTouch;
                if (editQuote && siteData.profile?.personalQuote) editQuote.value = siteData.profile.personalQuote;
                if (editCta && siteData.profile?.ctaText) editCta.value = siteData.profile.ctaText;
                
                // Load stats with safe property access
                const editGpa = document.getElementById('edit-stat-gpa');
                const editInstruments = document.getElementById('edit-stat-instruments');
                const editYears = document.getElementById('edit-stat-years');
                const editLeadership = document.getElementById('edit-stat-leadership');

                if (editGpa && siteData.profile?.stats?.gpa) editGpa.value = siteData.profile.stats.gpa;
                if (editInstruments && siteData.profile?.stats?.instruments) editInstruments.value = siteData.profile.stats.instruments;
                if (editYears && siteData.profile?.stats?.years) editYears.value = siteData.profile.stats.years;
                if (editLeadership && siteData.profile?.stats?.leadership) editLeadership.value = siteData.profile.stats.leadership;

                // Load journey and thoughts
                renderJourneyEditors();
                renderThoughtEditors();
            } catch (error) {
                console.error('Error in loadAdminData:', error);
            }
        }

        function saveProfile() {
            const saveButton = document.querySelector('.save-button[onclick="saveProfile()"]');
            if (saveButton) {
                saveButton.classList.add('button-loading');
                saveButton.textContent = 'Saving...';
            }

            try {
                // Add visual feedback
                setTimeout(() => {
                    siteData.profile.intro = document.getElementById('edit-hero-intro').value;
                    siteData.profile.name = document.getElementById('edit-hero-name').value;
                    siteData.profile.elevatorPitch = document.getElementById('edit-elevator-pitch').value;
                    siteData.profile.personalTouch = document.getElementById('edit-personal-touch').value;
                    siteData.profile.personalQuote = document.getElementById('edit-personal-quote').value;
                    siteData.profile.ctaText = document.getElementById('edit-cta-text').value;
                    
                    siteData.profile.stats.gpa = document.getElementById('edit-stat-gpa').value;
                    siteData.profile.stats.instruments = document.getElementById('edit-stat-instruments').value;
                    siteData.profile.stats.years = document.getElementById('edit-stat-years').value;
                    siteData.profile.stats.leadership = document.getElementById('edit-stat-leadership').value;
                    
                    saveData();
                    renderContent();
                    
                    if (saveButton) {
                        saveButton.classList.remove('button-loading');
                        saveButton.textContent = 'Save Personal Info';
                    }
                    
                    showToast('✨ Personal info saved successfully!', 'success');
                }, 800); // Simulate processing time for better UX
            } catch (error) {
                if (saveButton) {
                    saveButton.classList.remove('button-loading');
                    saveButton.textContent = 'Save Personal Info';
                }
                showToast('❌ Failed to save personal info', 'error');
                console.error('Error saving profile:', error);
            }
        }

        // Enhanced Journey editor functions
        function renderJourneyEditors() {
            const container = document.getElementById('journey-editor');
            container.innerHTML = '';
            
            siteData.journey.forEach((story, index) => {
                const div = document.createElement('div');
                div.className = 'edit-group';
                div.style.borderLeft = '4px solid rgba(157, 127, 255, 0.6)';
                div.innerHTML = `
                    <h3>${story.icon} Journey Story ${index + 1}</h3>
                    <div style="display: grid; grid-template-columns: 1fr 3fr; gap: 1rem; margin-bottom: 1rem;">
                        <div class="edit-field tooltip">
                            <label>Icon (emoji)</label>
                            <span class="tooltiptext">Choose an emoji that represents this story</span>
                            <input type="text" id="journey-icon-${index}" value="${story.icon}" placeholder="🚀" maxlength="2">
                        </div>
                        <div class="edit-field tooltip">
                            <label>Meta Info</label>
                            <span class="tooltiptext">Brief category or timeframe (e.g., "Music Journey • 6+ Years")</span>
                            <input type="text" id="journey-meta-${index}" value="${story.meta}" placeholder="Category • Timeframe">
                        </div>
                    </div>
                    <div class="edit-field tooltip">
                        <label>Story Title</label>
                        <span class="tooltiptext">A compelling headline that captures the essence of this story</span>
                        <input type="text" id="journey-title-${index}" value="${story.title}" placeholder="Your story title...">
                    </div>
                    <div class="edit-field tooltip">
                        <label>Elevator Pitch Line</label>
                        <span class="tooltiptext">A 2-3 sentence summary that hooks readers and makes them want to learn more</span>
                        <textarea id="journey-elevator-${index}" placeholder="Your compelling elevator pitch for this story..." rows="3">${story.elevatorLine}</textarea>
                    </div>
                    <div class="edit-field tooltip">
                        <label>Personal Detail</label>
                        <span class="tooltiptext">Add a personal touch, insight, or reflection that makes this story uniquely yours</span>
                        <textarea id="journey-personal-${index}" placeholder="What personal insight or lesson did you gain?" rows="3">${story.personalDetail}</textarea>
                    </div>
                    <div class="edit-field tooltip">
                        <label>Full Story Content</label>
                        <span class="tooltiptext">The detailed content readers will see when they click to learn more. Separate paragraphs with double line breaks.</span>
                        <textarea id="journey-content-${index}" rows="8" placeholder="Write your full story here... Each paragraph should be separated by double line breaks.">${story.content.body.map(item => item.content).join('\n\n')}</textarea>
                    </div>
                    <div class="button-group">
                        <button class="save-button tooltip" onclick="saveJourneyStory(${index})">
                            <span class="tooltiptext">Save this journey story and update the website</span>
                            Save Story
                        </button>
                        <button class="delete-button tooltip" onclick="deleteJourneyStory(${index})">
                            <span class="tooltiptext">Permanently delete this story - this cannot be undone!</span>
                            Delete Story
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function renderThoughtEditors() {
            const container = document.getElementById('thoughts-editor');
            container.innerHTML = '';
            
            siteData.thoughts.forEach((thought, index) => {
                const div = document.createElement('div');
                div.className = 'edit-group';
                div.style.borderLeft = '4px solid rgba(100, 150, 255, 0.6)';
                div.innerHTML = `
                    <h3>💭 Thought ${index + 1}</h3>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div class="edit-field tooltip">
                            <label>Title</label>
                            <span class="tooltiptext">A compelling title that captures the essence of your thought</span>
                            <input type="text" id="thought-title-${index}" value="${thought.title}" placeholder="Your thought-provoking title...">
                        </div>
                        <div class="edit-field tooltip">
                            <label>Date</label>
                            <span class="tooltiptext">When did you write or think about this? (e.g., "January 2025")</span>
                            <input type="text" id="thought-date-${index}" value="${thought.date}" placeholder="Month Year">
                        </div>
                    </div>
                    <div class="edit-field tooltip">
                        <label>Preview Text</label>
                        <span class="tooltiptext">A compelling preview that gives readers a taste of your insights - this appears on the main page</span>
                        <textarea id="thought-preview-${index}" rows="4" placeholder="Write an engaging preview that hooks readers and makes them want to read more...">${thought.preview}</textarea>
                    </div>
                    <div class="edit-field tooltip">
                        <label>Full Content</label>
                        <span class="tooltiptext">Your complete thoughts and reflections. Separate paragraphs with double line breaks.</span>
                        <textarea id="thought-content-${index}" rows="10" placeholder="Share your full thoughts, insights, and reflections... Each paragraph should be separated by double line breaks.">${thought.content.body.map(item => item.content).join('\n\n')}</textarea>
                    </div>
                    <div class="button-group">
                        <button class="save-button tooltip" onclick="saveThought(${index})">
                            <span class="tooltiptext">Save this thought and update the website</span>
                            Save Thought
                        </button>
                        <button class="delete-button tooltip" onclick="deleteThought(${index})">
                            <span class="tooltiptext">Permanently delete this thought - this cannot be undone!</span>
                            Delete Thought
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function saveJourneyStory(index) {
            const saveButton = document.querySelector(`button[onclick="saveJourneyStory(${index})"]`);
            if (saveButton) {
                saveButton.classList.add('button-loading');
                saveButton.textContent = 'Saving...';
            }

            try {
                setTimeout(() => {
                    const story = siteData.journey[index];
                    story.icon = document.getElementById(`journey-icon-${index}`).value;
                    story.meta = document.getElementById(`journey-meta-${index}`).value;
                    story.title = document.getElementById(`journey-title-${index}`).value;
                    story.elevatorLine = document.getElementById(`journey-elevator-${index}`).value;
                    story.personalDetail = document.getElementById(`journey-personal-${index}`).value;
                    
                    // Update content
                    const contentText = document.getElementById(`journey-content-${index}`).value;
                    const paragraphs = contentText.split('\n\n').filter(p => p.trim());
                    story.content.body = paragraphs.map(p => ({type: 'paragraph', content: p.trim()}));
                    story.content.title = story.title;
                    
                    saveData();
                    renderContent();
                    
                    if (saveButton) {
                        saveButton.classList.remove('button-loading');
                        saveButton.textContent = 'Save Story';
                    }
                    
                    showToast('🚀 Journey story saved successfully!', 'success');
                }, 600);
            } catch (error) {
                if (saveButton) {
                    saveButton.classList.remove('button-loading');
                    saveButton.textContent = 'Save Story';
                }
                showToast('❌ Failed to save journey story', 'error');
                console.error('Error saving journey story:', error);
            }
        }

        function saveThought(index) {
            const saveButton = document.querySelector(`button[onclick="saveThought(${index})"]`);
            if (saveButton) {
                saveButton.classList.add('button-loading');
                saveButton.textContent = 'Saving...';
            }

            try {
                setTimeout(() => {
                    const thought = siteData.thoughts[index];
                    thought.title = document.getElementById(`thought-title-${index}`).value;
                    thought.date = document.getElementById(`thought-date-${index}`).value;
                    thought.preview = document.getElementById(`thought-preview-${index}`).value;
                    
                    // Update content
                    const contentText = document.getElementById(`thought-content-${index}`).value;
                    const paragraphs = contentText.split('\n\n').filter(p => p.trim());
                    thought.content.body = paragraphs.map(p => ({type: 'paragraph', content: p.trim()}));
                    thought.content.title = thought.title;
                    thought.content.meta = `${thought.date} • A personal reflection`;
                    
                    saveData();
                    renderContent();
                    
                    if (saveButton) {
                        saveButton.classList.remove('button-loading');
                        saveButton.textContent = 'Save Thought';
                    }
                    
                    showToast('💭 Thought saved successfully!', 'success');
                }, 600);
            } catch (error) {
                if (saveButton) {
                    saveButton.classList.remove('button-loading');
                    saveButton.textContent = 'Save Thought';
                }
                showToast('❌ Failed to save thought', 'error');
                console.error('Error saving thought:', error);
            }
        }

        function deleteJourneyStory(index) {
            const story = siteData.journey[index];
            const confirmMessage = `Are you sure you want to delete "${story.title}"?\n\nThis action cannot be undone!`;
            
            if (confirm(confirmMessage)) {
                const deleteButton = document.querySelector(`button[onclick="deleteJourneyStory(${index})"]`);
                if (deleteButton) {
                    deleteButton.classList.add('button-loading');
                    deleteButton.textContent = 'Deleting...';
                }
                
                setTimeout(() => {
                    siteData.journey.splice(index, 1);
                    saveData();
                    renderContent();
                    renderJourneyEditors();
                    showToast('🗑️ Journey story deleted successfully', 'success');
                }, 500);
            }
        }

        function deleteThought(index) {
            const thought = siteData.thoughts[index];
            const confirmMessage = `Are you sure you want to delete "${thought.title}"?\n\nThis action cannot be undone!`;
            
            if (confirm(confirmMessage)) {
                const deleteButton = document.querySelector(`button[onclick="deleteThought(${index})"]`);
                if (deleteButton) {
                    deleteButton.classList.add('button-loading');
                    deleteButton.textContent = 'Deleting...';
                }
                
                setTimeout(() => {
                    siteData.thoughts.splice(index, 1);
                    saveData();
                    renderContent();
                    renderThoughtEditors();
                    showToast('🗑️ Thought deleted successfully', 'success');
                }, 500);
            }
        }

        function addNewJourneyStory() {
            const addButton = document.querySelector('button[onclick="addNewJourneyStory()"]');
            if (addButton) {
                addButton.classList.add('button-loading');
                addButton.textContent = 'Creating...';
            }
            
            setTimeout(() => {
                const newStory = {
                    id: `journey-${Date.now()}`,
                    icon: '✨',
                    meta: 'New Journey • Present',
                    title: 'New Journey Story',
                    elevatorLine: 'This is your elevator pitch for this story...',
                    personalDetail: 'Add your personal touch and insights here...',
                    content: {
                        title: 'New Journey Story',
                        meta: 'New Journey • Present',
                        body: [
                            {type: 'paragraph', content: 'Start writing your journey story here...'}
                        ]
                    }
                };
                
                siteData.journey.push(newStory);
                saveData();
                renderContent();
                renderJourneyEditors();
                
                if (addButton) {
                    addButton.classList.remove('button-loading');
                    addButton.textContent = '+ Add New Journey Story';
                }
                
                showToast('✨ New journey story created! Scroll down to edit it.', 'success');
                
                // Scroll to the new story
                setTimeout(() => {
                    const newStoryElement = document.querySelector('#journey-editor .edit-group:last-child');
                    if (newStoryElement) {
                        newStoryElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 200);
            }, 800);
        }

        function addNewThought() {
            const addButton = document.querySelector('button[onclick="addNewThought()"]');
            if (addButton) {
                addButton.classList.add('button-loading');
                addButton.textContent = 'Creating...';
            }
            
            setTimeout(() => {
                const newThought = {
                    id: `thought-${Date.now()}`,
                    title: 'New Thought',
                    date: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),
                    preview: 'This is a preview of your new thought...',
                    content: {
                        title: 'New Thought',
                        meta: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }) + ' • A personal reflection',
                        body: [
                            {type: 'paragraph', content: 'Start writing your thought here...'}
                        ]
                    }
                };
                
                siteData.thoughts.push(newThought);
                saveData();
                renderContent();
                renderThoughtEditors();
                
                if (addButton) {
                    addButton.classList.remove('button-loading');
                    addButton.textContent = '+ Add New Thought';
                }
                
                showToast('💭 New thought created! Scroll down to edit it.', 'success');
                
                // Scroll to the new thought
                setTimeout(() => {
                    const newThoughtElement = document.querySelector('#thoughts-editor .edit-group:last-child');
                    if (newThoughtElement) {
                        newThoughtElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 200);
            }, 800);
        }

        // Three.js setup
        if (typeof THREE === 'undefined') {
            console.error('Three.js failed to load');
        } else {
            // Scene setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ 
                canvas: document.getElementById('canvas'), 
                antialias: true, 
                alpha: true 
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
            directionalLight.position.set(10, 10, 5);
            scene.add(directionalLight);

            // Create more dynamic star field
            const starsCount = 300;
            const starsPositions = new Float32Array(starsCount * 3);
            const starsColors = new Float32Array(starsCount * 3);

            // Generate stars with slight color variations
            for(let i = 0; i < starsCount; i++) {
                starsPositions[i * 3] = (Math.random() - 0.5) * 30;     // x
                starsPositions[i * 3 + 1] = (Math.random() - 0.5) * 30; // y
                starsPositions[i * 3 + 2] = (Math.random() - 0.5) * 30; // z
                
                // Slight blue/white color variation
                const intensity = 0.8 + Math.random() * 0.2;
                starsColors[i * 3] = intensity;     // r
                starsColors[i * 3 + 1] = intensity; // g
                starsColors[i * 3 + 2] = 1.0;       // b (slightly more blue)
            }

            const starsGeometry = new THREE.BufferGeometry();
            starsGeometry.setAttribute('position', new THREE.BufferAttribute(starsPositions, 3));
            starsGeometry.setAttribute('color', new THREE.BufferAttribute(starsColors, 3));

            const starsMaterial = new THREE.PointsMaterial({
                size: 2.5,
                sizeAttenuation: false,
                transparent: true,
                opacity: 0.8,
                vertexColors: true,
                blending: THREE.AdditiveBlending
            });

            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);

            // Add floating particles for atmosphere
            const particlesCount = 50;
            const particlesPositions = new Float32Array(particlesCount * 3);
            
            for(let i = 0; i < particlesCount; i++) {
                particlesPositions[i * 3] = (Math.random() - 0.5) * 20;
                particlesPositions[i * 3 + 1] = (Math.random() - 0.5) * 20;
                particlesPositions[i * 3 + 2] = (Math.random() - 0.5) * 20;
            }

            const particlesGeometry = new THREE.BufferGeometry();
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(particlesPositions, 3));

            const particlesMaterial = new THREE.PointsMaterial({
                color: 0x4444ff,
                size: 1,
                sizeAttenuation: false,
                transparent: true,
                opacity: 0.3,
                blending: THREE.AdditiveBlending
            });

            const particles = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particles);
            
            // Camera setup
            camera.position.z = 8;

            // Scroll and interaction
            let scrollY = window.scrollY;
            let currentSection = 0;

            window.addEventListener('scroll', () => {
                scrollY = window.scrollY;
                const newSection = Math.round(scrollY / window.innerHeight);
                
                if (newSection !== currentSection) {
                    currentSection = newSection;
                }
            });

            // Enhanced mouse movement for more personal feel
            const cursor = { x: 0, y: 0 };
            
            window.addEventListener('mousemove', (event) => {
                cursor.x = event.clientX / window.innerWidth - 0.5;
                cursor.y = event.clientY / window.innerHeight - 0.5;
            });

            // Animation
            const clock = new THREE.Clock();
            let previousTime = 0;

            const animate = () => {
                const elapsedTime = clock.getElapsedTime();
                const deltaTime = elapsedTime - previousTime;
                previousTime = elapsedTime;

                // Smooth camera movement based on scroll
                const targetY = -scrollY / window.innerHeight * 5;
                camera.position.y += (targetY - camera.position.y) * 2 * deltaTime;

                // Enhanced parallax effect
                const parallaxX = cursor.x * 0.5;
                const parallaxY = -cursor.y * 0.5;
                
                camera.position.x += (parallaxX - camera.position.x) * 3 * deltaTime;
                camera.position.z = 8 + parallaxY * 0.8;

                // Gentle star rotation and floating
                stars.rotation.y = elapsedTime * 0.008;
                stars.rotation.x = Math.sin(elapsedTime * 0.003) * 0.1;

                // Particle animation
                particles.rotation.y = -elapsedTime * 0.01;
                particles.rotation.z = elapsedTime * 0.005;

                // Camera slight breathing effect
                camera.position.y += Math.sin(elapsedTime * 0.5) * 0.05;

                // Render
                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            };

            animate();

            // Resize handler
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            });
        }

        // Enhanced custom cursor for personal touch
        window.addEventListener('mousemove', (e) => {
            try {
                const cursorDot = document.querySelector('.cursor');
                const cursorFollower = document.querySelector('.cursor-follower');
                
                if (cursorDot && e.clientX && e.clientY) {
                    cursorDot.style.left = e.clientX + 'px';
                    cursorDot.style.top = e.clientY + 'px';
                }
                
                if (cursorFollower && e.clientX && e.clientY) {
                    cursorFollower.style.left = e.clientX + 'px';
                    cursorFollower.style.top = e.clientY + 'px';
                }
            } catch (error) {
                console.error('Error in cursor mousemove:', error);
            }
        });

        // Add cursor interactions with better event delegation
        document.addEventListener('mouseover', (e) => {
            try {
                let target = e.target;
                // Check if the target or any parent is a story/thought card
                while (target && target !== document) {
                    if (target.classList && (target.classList.contains('story-card') || target.classList.contains('thought-card'))) {
                        const cursorDot = document.querySelector('.cursor');
                        const cursorFollower = document.querySelector('.cursor-follower');
                        if (cursorDot) cursorDot.style.transform = 'scale(1.5)';
                        if (cursorFollower) cursorFollower.style.transform = 'scale(1.2)';
                        break;
                    }
                    target = target.parentElement;
                }
            } catch (error) {
                console.error('Error in mouseover handler:', error);
            }
        });

        document.addEventListener('mouseout', (e) => {
            try {
                let target = e.target;
                // Check if the target or any parent is a story/thought card
                while (target && target !== document) {
                    if (target.classList && (target.classList.contains('story-card') || target.classList.contains('thought-card'))) {
                        const cursorDot = document.querySelector('.cursor');
                        const cursorFollower = document.querySelector('.cursor-follower');
                        if (cursorDot) cursorDot.style.transform = 'scale(1)';
                        if (cursorFollower) cursorFollower.style.transform = 'scale(1)';
                        break;
                    }
                    target = target.parentElement;
                }
            } catch (error) {
                console.error('Error in mouseout handler:', error);
            }
        });

        // Intersection Observer for fade-in animations
        function observeElements() {
            try {
                const observerOptions = {
                    threshold: 0.15,
                    rootMargin: '0px 0px -80px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        try {
                            if (entry.isIntersecting && entry.target && entry.target.classList) {
                                entry.target.classList.add('visible');
                            }
                        } catch (error) {
                            console.error('Error in observer callback:', error);
                        }
                    });
                }, observerOptions);

                const elements = document.querySelectorAll('.story-card, .thought-card');
                elements.forEach(el => {
                    if (el) {
                        observer.observe(el);
                    }
                });
            } catch (error) {
                console.error('Error in observeElements:', error);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            try {
                loadData();
                
                // Hide loading screen with personal touch
                setTimeout(() => {
                    const loading = document.getElementById('loading');
                    if (loading) {
                        loading.classList.add('hidden');
                    }
                }, 800);
            } catch (error) {
                console.error('Error during initialization:', error);
                const loading = document.getElementById('loading');
                if (loading) {
                    loading.classList.add('hidden');
                }
            }
        });

        // Fallback for older browsers
        window.addEventListener('load', () => {
            if (!document.getElementById('hero-intro')?.textContent) {
                try {
                    loadData();
                } catch (error) {
                    console.error('Error in fallback load:', error);
                }
            }
        });

        // Add some personal touches with subtle animations
        window.addEventListener('scroll', () => {
            try {
                const scrolled = window.scrollY;
                const rate = scrolled * -0.5;
                
                // Parallax effect on floating elements
                const floatingElements = document.querySelectorAll('.floating-element');
                floatingElements.forEach((element, index) => {
                    if (element) {
                        const speed = 0.5 + (index * 0.1);
                        element.style.transform = `translateY(${rate * speed}px)`;
                    }
                });
            } catch (error) {
                console.error('Error in scroll handler:', error);
            }
        });

        // Add typing effect to hero text
        function typeWriter(element, text, speed = 50) {
            let i = 0;
            element.textContent = '';
            
            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            
            type();
        }

        // Add some personality on page interactions with better event delegation
        let personalityCounter = 0;
        const personalityMessages = [
            "Thanks for exploring my story! 🎷",
            "Hope you're enjoying the journey! ✨",
            "Feel free to reach out anytime! 💭",
            "Thanks for stopping by! 🌟"
        ];

        document.addEventListener('click', (e) => {
            try {
                let target = e.target;
                // Check if the target or any parent is a story/thought card
                while (target && target !== document) {
                    if (target.classList && (target.classList.contains('story-card') || target.classList.contains('thought-card'))) {
                        personalityCounter++;
                        if (personalityCounter % 3 === 0) {
                            const message = personalityMessages[Math.floor(Math.random() * personalityMessages.length)];
                            setTimeout(() => showToast(message), 1000);
                        }
                        break;
                    }
                    target = target.parentElement;
                }
            } catch (error) {
                console.error('Error in personality interaction:', error);
            }
        });
    </script>
</body>
</html>
